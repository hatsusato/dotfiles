#!/bin/bash

set -eu

set-askpass() {
  [[ ${1-} == -* ]] && return 1
  xhost &>/dev/null
  askpass=$(command -v pinentry-askpass)
}
main() {
  local askpass
  if set-askpass; then
    export SUDO_ASKPASS=$askpass
    sudo -A "$@"
  else
    sudo "$@"
  fi
}

main "$@"
