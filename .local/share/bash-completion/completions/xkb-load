#!/bin/bash

_xkb-load() {
  local xkbdir=$HOME/.config/xkb
  [[ -d $xkbdir ]] || return
  [[ $1 == $3 ]] || return
  readarray -t COMPREPLY < <(cd "$xkbdir"; compgen -f -X '!*.xkb' -- "$2")
  compopt -o filenames
} && complete -F _xkb-load xkb-load
