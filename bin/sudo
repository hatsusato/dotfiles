#!/bin/bash
# depends: (pinentry-askpass) sudo
set -eu

use-askpass() {
  [[ -v DISPLAY ]] || return
  command -v pinentry-askpass
}

if use-askpass >/dev/null; then
  export SUDO_ASKPASS=$(use-askpass)
  set -- -A "$@"
fi
/usr/bin/sudo "$@"
