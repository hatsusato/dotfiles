#!/bin/bash
# depends: apt-get
set -eu

readonly log=$HOME/.config/.local/apt/install.log

setup() {
  mkdir -p "${log%/*}"
  touch "$log"
  [[ -w $log ]] && return
  echo "ERROR: no write access: $log" >&2
  exit 1
}
record() {
  local arg 
  for arg in "$@"; do
    [[ $arg == [-./~]* ]] && continue
    grep -Fqx "$arg" <"$log" && continue
    echo "$arg" >>"$log"
  done
}

setup
sudo apt-get install "$@"
record "$@"
